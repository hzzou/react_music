(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,n){e.exports=n.p+"static/media/nodata.52efa839.png"},261:function(e,t,n){e.exports=n.p+"static/media/404.b436c8a0.png"},269:function(e,t,n){e.exports=n.p+"static/media/svg-1.d5ebd5a5.svg"},270:function(e,t,n){e.exports=n.p+"static/media/svg-2.3a182828.svg"},277:function(e,t,n){e.exports=n(591)},286:function(e,t,n){},288:function(e,t,n){},335:function(e,t,n){},337:function(e,t,n){},346:function(e,t,n){},368:function(e,t,n){},370:function(e,t,n){},372:function(e,t,n){},389:function(e,t,n){},412:function(e,t){},424:function(e,t){},426:function(e,t){},583:function(e,t,n){},588:function(e,t,n){},590:function(e,t){!function(e,t){var n,a=e.document,r=a.documentElement,s=a.querySelector('meta[name="viewport"]'),o=a.querySelector('meta[name="flexible"]'),c=0,i=0,l=t.flexible||(t.flexible={});if(s){console.warn("\u5c06\u6839\u636e\u5df2\u6709\u7684meta\u6807\u7b7e\u6765\u8bbe\u7f6e\u7f29\u653e\u6bd4\u4f8b");var u=s.getAttribute("content").match(/initial\-scale=([\d\.]+)/);u&&(i=parseFloat(u[1]),c=parseInt(1/i))}else if(o){var p=o.getAttribute("content");if(p){var h=p.match(/initial\-dpr=([\d\.]+)/),m=p.match(/maximum\-dpr=([\d\.]+)/);h&&(c=parseFloat(h[1]),i=parseFloat((1/c).toFixed(2))),m&&(c=parseFloat(m[1]),i=parseFloat((1/c).toFixed(2)))}}if(!c&&!i){var d=e.navigator.appVersion.match(/android/gi),f=e.navigator.appVersion.match(/iphone/gi),v=e.devicePixelRatio;f?c=v>=3&&(!c||c>=3)?3:v>=2&&(!c||c>=2)?2:1:d&&Number.isInteger(c)?v>=4&&(!c||c>=4)?c=4:v>=3&&(!c||c>=3)?c=3:v>=2&&(!c||c>=2)&&(c=2):c=1,i=1/c}if(r.setAttribute("data-dpr",c),!s)if((s=a.createElement("meta")).setAttribute("name","viewport"),s.setAttribute("content","width=device-width, initial-scale="+i+", maximum-scale="+i+", minimum-scale="+i+", user-scalable=no"),r.firstElementChild)r.firstElementChild.appendChild(s);else{var g=a.createElement("div");g.appendChild(s),a.write(g.innerHTML)}function y(){var t=r.getBoundingClientRect().width;t/c>540&&(t=540*c);var n=t/10;r.style.fontSize=n+"px",l.rem=e.rem=n}e.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(y,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(n),n=setTimeout(y,300))},!1),"complete"===a.readyState?a.body.style.fontSize=14*c+"px":a.addEventListener("DOMContentLoaded",function(e){a.body.style.fontSize=14*c+"px"},!1),y(),l.dpr=e.dpr=c,l.refreshRem=y,l.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"===typeof e&&e.match(/rem$/)&&(t+="px"),t},l.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"===typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}))},591:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchSearchHot",function(){return D}),n.d(a,"fetchSearchResult",function(){return V}),n.d(a,"clearSearchResult",function(){return U});var r={};n.r(r),n.d(r,"addMusicOne",function(){return J}),n.d(r,"removeMusicOne",function(){return Y}),n.d(r,"removeMusicAll",function(){return G}),n.d(r,"addFavoriteMusic",function(){return X}),n.d(r,"control",function(){return q}),n.d(r,"removeFavoriteMusic",function(){return $}),n.d(r,"getMusicHash",function(){return K}),n.d(r,"fetchMusic",function(){return ne}),n.d(r,"updateLyrics",function(){return Z}),n.d(r,"audioObj",function(){return Q}),n.d(r,"updateProgress",function(){return ee}),n.d(r,"volumeControl",function(){return te});var s=n(0),o=n.n(s),c=n(35),i=n.n(c),l=n(5),u=n(6),p=n(8),h=n(7),m=n(9),d=n(20),f=n(596),v=n(598),g=n(599),y=n(597),b=n(261),E=n.n(b),O=n(592),k=(n(286),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"notFound"},o.a.createElement("img",{src:E.a,alt:"img_404"}),o.a.createElement("span",null,"\u62b1\u6b49\uff0c\u9875\u9762\u51fa\u9519\u4e86\uff01\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u5df2\u7ecf\u79bb\u5f00\u5730\u7403"),o.a.createElement(O.a,{to:"/"},"\u8fd4\u56de\u9996\u9875"))}}]),t}(o.a.Component)),S=n(18),j=(n(288),n(245)),N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={loaded:!1,value:"",display:!0,history:localStorage.getItem("search_history")?JSON.parse(localStorage.getItem("search_history")):[],hotListData:[]},n.setHistory=n.setHistory.bind(Object(S.a)(Object(S.a)(n))),n.handleSearch=n.handleSearch.bind(Object(S.a)(Object(S.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.hotList.length>0&&localStorage.setItem("hotList",JSON.stringify(this.props.hotList))}},{key:"handleSearchHot",value:function(e){this.props.history.push({pathname:"/search/result",state:{searchValue:e}}),this.setHistory(e)}},{key:"keyUp",value:function(e){this.setState({display:!0}),13===e.keyCode&&this.handleSearch()}},{key:"handleSearch",value:function(){var e=this.state.value.trim();""!==e&&(this.props.history.push({pathname:"/search/result",state:{searchValue:e}}),this.setHistory(e))}},{key:"setHistory",value:function(e){console.log(this.state),this.setState({history:this.state.history.push(e)});for(var t=this.state.history,n=[],a=0;a<t.length;a++)-1===n.indexOf(t[a])&&n.push(t[a]);console.log(n),localStorage.setItem("search_history",JSON.stringify(n))}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"clearHistory",value:function(e){var t=JSON.parse(localStorage.getItem("search_history")),n=t.indexOf(e);t.splice(n,1),localStorage.setItem("search_history",JSON.stringify(t)),this.setState({history:t})}},{key:"clearAll",value:function(){localStorage.setItem("search_history",JSON.stringify([])),this.setState({history:[]})}},{key:"clearText",value:function(){this.setState({value:"",display:!1})}},{key:"back",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this,t=this.props.hotList.length>0?this.props.hotList:JSON.parse(localStorage.getItem("hotList"));console.log(t),console.log(this.state);var n=t.map(function(t){return o.a.createElement("span",{key:t.sort,onClick:function(){return e.handleSearchHot(t.keyword)}},t.keyword)});return o.a.createElement("div",{className:"search"},o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"headerBack",onClick:function(){return e.back()}},o.a.createElement(j.a,{type:"arrow-left"})),o.a.createElement("div",{className:"searchBar"},o.a.createElement("div",{className:"searchInput"},o.a.createElement(j.a,{type:"search"}),o.a.createElement("input",{type:"text",className:"input-search",value:this.state.value,onChange:function(t){return e.handleChange(t)},placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57",onKeyUp:function(t){return e.keyUp(t)}}),o.a.createElement(j.a,{type:"close",onClick:function(){return e.clearText()},style:{display:this.state.display?"block":"none"}}))),o.a.createElement("div",{className:"headerRight",onClick:this.handleSearch},"\u641c\u7d22")),o.a.createElement("div",{className:"hotSearch"},"\u70ed\u95e8\u641c\u7d22"),o.a.createElement("div",{className:"hotList"},n),o.a.createElement("div",{className:"searchHistory"},o.a.createElement("span",null,"\u641c\u7d22\u5386\u53f2"),o.a.createElement("span",{onClick:function(){return e.clearAll()}},"\u6e05\u9664\u5386\u53f2")),o.a.createElement("div",{className:"historyList"},this.state.history.length>0?this.state.history.map(function(t,n){return o.a.createElement("p",{key:n},o.a.createElement("span",null,t),o.a.createElement(j.a,{type:"close",onClick:function(){return e.clearHistory(t)}}))}):null))}}]),t}(o.a.Component),C=n(24),A=n.n(C),M=n(36),I={new_song:"?json=true",song_play:"plist/index&json=true",song_playlist:"plist/list",rank:"rank/list&json=true",rankid:"rank/info/",singer_category:"singer/class&json=true",singer_list:"singer/list/",singer_detail:"singer/info/",song_detail:"app/i/getSongInfo.php",song_lyrics:"app/i/krc.php",searchHot:"api/v3/search/hot",searchResult:"api/v3/search/song"},x=n(265),_=n.n(x),w={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},L=function(e){return e},T="",R="",F={get:function(e){return T=e,fetch(e)},post:function(e,t){return R=e,fetch(e,{body:_.a.stringify(t),headers:w,method:"POST"}).then(L).catch(function(e){console.log(e)})},getUrl:T,postUrl:R},U=function(){return{type:"CLEAR_SEARCH_RESULT"}},D=function(){return function(){var e=Object(M.a)(A.a.mark(function e(t){var n,a,r,s;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get("/mobilecdn/".concat(I.searchHot,"?format=json"));case 3:return n=e.sent,e.next=6,n.json();case 6:for(a=e.sent,console.log(a),r=a.data.info,s=0;s<r.length;s++)r[s].sort=s;t({type:"SAVE_SEARCH_HOT",data:r}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Error:",e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return function(){var a=Object(M.a)(A.a.mark(function a(r){var s,o;return A.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,F.get("/mobilecdn/".concat(I.searchResult,"?format=json&keyword=").concat(e,"&page=").concat(t,"&pagesize=").concat(n));case 3:return s=a.sent,a.next=6,s.json();case 6:o=a.sent,console.log(o),r({type:"SAVE_SEARCH_RESULT",data:o.data.info}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("Error:"+a.t0);case 14:case"end":return a.stop()}},a,this,[[0,11]])}));return function(e){return a.apply(this,arguments)}}()},H=n(11),P=Object(d.b)(function(e){return e},function(e){return{searchActions:Object(H.b)(a,e)}})(N),B=function(e){var t=e.split("\r\n"),n=/\[\d{2}:\d{2}.\d{2}\]/g,a=[];return 0===t[t.length-1].length&&t.pop(),t.map(function(e){var t=e.match(n),r=e.replace(n,"");return t.map(function(e){var t=e.slice(1,-1).split(":");return a.push([60*parseInt(t[0],10)+parseFloat(t[1]),r]),0}),0}),a.sort(function(e,t){return e[0]-t[0]}),a},z=function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)},W=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t},J=function(e){return{type:"MUSIC_ADD_ONE",data:e}},Y=function(e){return{type:"MUSIC_REMOVE_ONE",data:e}},G=function(e){return{type:"MUSIC_REMOVE_ALL",data:e}},X=function(e){return{type:"MUSIC_ADD_FAVORITE",data:e}},$=function(e){return{type:"MUSIC_REMOVE_FAVORITE",data:e}},q=function(e){return{type:"MUSIC_CONTROL",playing:e}},K=function(e){return{type:"MUSIC_GET_HASH",data:e}},Q=function(e){return{type:"MUSIC_AUDIO",data:e}},Z=function(e){return{type:"MUSIC_UPDATE_LYRICS",data:e}},ee=function(e){return{type:"MUSIC_PLAYTIME",data:e}},te=function(e){return{type:"MUSIC_VOLUME",data:e}},ne=function(e){return function(){var t=Object(M.a)(A.a.mark(function t(n){var a,r,s,o,c;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.get("/kugou/".concat(I.song_detail,"?cmd=playInfo&hash=").concat(e));case 3:return a=t.sent,t.next=6,a.json();case 6:return r=t.sent,t.next=9,F.get("/kugou/".concat(I.song_lyrics,"?cmd=100&hash=").concat(e,"&timelength=").concat(r.timeLength));case 9:return s=t.sent,t.next=12,s.text();case 12:o=t.sent,c={song:r,lyrics:B(o)},n(J(c)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}},t,this,[[0,17]])}));return function(e){return t.apply(this,arguments)}}()},ae=(n(335),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e;return this.props.rightIcon?"plus"===this.props.rightClassName?e=o.a.createElement(j.a,{type:"plus",className:this.props.rightClassName,onClick:this.props.rightAction}):"ellipsis"===this.props.rightClassName&&(e=o.a.createElement(j.a,{type:"ellipsis",className:this.props.rightClassName,onClick:this.props.rightAction})):e=null,o.a.createElement("div",{className:"header",style:this.props.style?this.props.style:null},o.a.createElement("div",{className:"headerBack",onClick:this.props.leftAction},o.a.createElement(j.a,{type:"arrow-left"})),o.a.createElement("div",{className:"headerTitle"},this.props.title),o.a.createElement("div",{className:"headerRight"},e))}}]),t}(o.a.Component)),re=n(593),se=(n(337),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=o.a.createElement(j.a,{type:"loading",style:{fontSize:50}});return o.a.createElement("div",{className:"loading"},o.a.createElement(re.a,{indicator:e}))}}]),t}(o.a.Component)),oe=(n(346),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).addFavorite=function(e,t){""===e.currentTarget.style.color||"rgb(102, 102, 102)"===e.currentTarget.style.color?(e.currentTarget.style.color="#f00",n.props.musicActions.addFavoriteMusic(t.hash+","+t.filename)):(e.currentTarget.style.color="#666",n.props.musicActions.removeFavoriteMusic(t.hash+","+t.filename))},n.state={addRemove:!0},n.setStyle=n.setStyle.bind(Object(S.a)(Object(S.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props),this.props.searchActions.clearSearchResult()}},{key:"componentDidMount",value:function(){console.log(this.props),this.props.searchActions.fetchSearchResult(this.props.location.state.searchValue)}},{key:"addOne",value:function(e,t){e.currentTarget.style.display="none",e.currentTarget.nextSibling.style.display="block",this.props.musicActions.addMusicOne(t)}},{key:"removeOne",value:function(e,t){e.currentTarget.style.display="none",e.currentTarget.previousSibling.style.display="block",this.props.musicActions.removeMusicOne(t)}},{key:"addOrRemoveAll",value:function(e){var t=document.getElementsByClassName("plus_one"),n=document.getElementsByClassName("minus_one");if(this.state.addRemove){this.props.musicActions.addMusicAll(e),this.setState({addRemove:!1});for(var a=0;a<t.length;a++)t[a].style.display="none";for(var r=0;r<n.length;r++)n[r].style.display="block"}else{this.props.musicActions.removeMusicAll(),this.setState({addRemove:!0});for(var s=0;s<t.length;s++)t[s].style.display="block";for(var o=0;o<n.length;o++)n[o].style.display="none"}}},{key:"setStyle",value:function(e){return this.props.favoriteMusic.length>0&&this.props.favoriteMusic.indexOf(e.filename)>=0?{color:"rgba(233,32,61)"}:{color:""}}},{key:"back",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this;console.log(this.props);var t=null,n=this.props.resultList,a=0;return n.length>0&&(a=1,t=n.map(function(t,n){return o.a.createElement("li",{key:n},o.a.createElement(O.a,{to:"/search/result"},o.a.createElement("span",null,t.filename),o.a.createElement("span",{style:{float:"right",marginLeft:"20px",display:"flex",justifyContent:"flex-start"}},o.a.createElement(j.a,{onClick:function(n){return e.addFavorite(n,t)},type:"heart",style:e.setStyle(t),theme:"filled"}),o.a.createElement(j.a,{onClick:function(n){return e.addOne(n,t)},className:"plus_one",type:"plus"}),o.a.createElement(j.a,{onClick:function(n){return e.removeOne(n,t)},className:"minus_one",type:"minus"}))))})),o.a.createElement("div",{className:"result"},o.a.createElement(ae,{title:"\u641c\u7d22\u7ed3\u679c",leftAction:function(){return e.back()},rightIcon:!0,rightClassName:"plus",rightAction:function(){return e.addOrRemoveAll(n)}}),1===a?o.a.createElement("ul",null,t):o.a.createElement(se,null))}}]),t}(o.a.Component)),ce=Object(d.b)(function(e){return e},function(e){return{searchActions:Object(H.b)(a,e),musicActions:Object(H.b)(r,e)}})(oe),ie=n(3),le=n.n(ie),ue=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).onFocus=n.onFocus.bind(Object(S.a)(Object(S.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onFocus",value:function(){this.props.history.push({pathname:"/search"})}},{key:"render",value:function(){var e=this.props.control.playing;return o.a.createElement("div",{className:"homeHeader"},o.a.createElement("div",{className:"userName"},o.a.createElement(O.a,{to:"/"},o.a.createElement(j.a,{type:"user"}))),o.a.createElement("div",{className:"searchBar"},o.a.createElement("div",{className:"searchInput"},o.a.createElement(j.a,{type:"search"}),o.a.createElement("input",{onFocus:this.onFocus,type:"text",placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57"}))),o.a.createElement("div",{className:"music-icon"},o.a.createElement(O.a,{to:"/"},o.a.createElement("div",{className:"music-icon-animate"},["one","two","three","four"].map(function(t,n){return o.a.createElement("span",{key:n,className:le()(t,e?"playing":"paused")})})))))}}]),t}(o.a.Component),pe=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("ul",{className:"nav"},this.props.tabs.map(function(t,n){return o.a.createElement("li",{key:n,className:e.props.location.pathname===t.path?"active":""},o.a.createElement(O.a,{to:"".concat(t.path)},t.text))}))}}]),t}(o.a.Component);pe.defaultProps={tabs:[{text:"\u4e2a\u6027\u63a8\u8350",path:"/"},{text:"\u65b0\u6b4c\u901f\u9012",path:"/new"},{text:"\u6392\u884c\u699c",path:"/rank"},{text:"\u6b4c\u624b",path:"/artist"}]};var he=pe,me=n(595),de=n(594),fe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={loaded:!1},n.getData=n.getData.bind(Object(S.a)(Object(S.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(M.a)(A.a.mark(function e(){var t,n,a,r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get("/kugou/".concat(I.new_song));case 3:return t=e.sent,console.log(t),e.next=7,t.json();case 7:return n=e.sent,console.log(n),e.next=11,F.get("/kugou/".concat(I.song_play));case 11:return a=e.sent,e.next=14,a.json();case 14:r=e.sent,this.setState({loaded:!0,banner:n.banner,song_list:r.plist.list.info}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}},e,this,[[0,18]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.loaded){var e=this.state.banner.map(function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("img",{className:"carImg",src:e.imgurl,alt:e.title}))}),t=this.state.song_list.map(function(e,t){return o.a.createElement(me.a,{style:{boxSizing:"content-box!important"},key:t,className:"songList",cover:o.a.createElement(O.a,{to:{pathname:"/albumlist/".concat(e.specialid),state:{searchValue:e}}},o.a.createElement("img",{src:e.imgurl.replace(/\{size\}/g,400),alt:e.specialname}))},o.a.createElement("p",null,e.specialname))});return o.a.createElement("div",{className:"recommend"},o.a.createElement(de.a,{dots:!0,autoplay:!0,effect:"fade"},e),o.a.createElement("div",{className:"recommendTitle"},"\u63a8\u8350\u6b4c\u5355"),o.a.createElement("div",{className:"songWrap"},t))}return o.a.createElement(se,null)}}]),t}(o.a.Component),ve=(n(368),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.searchActions.fetchSearchHot()}},{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement(ue,this.props)," ",o.a.createElement(he,this.props),o.a.createElement(fe,this.props))}}]),t}(o.a.Component)),ge=Object(d.b)(function(e){return e},function(e){return{musicActions:Object(H.b)(r,e),searchActions:Object(H.b)(a,e)}})(ve),ye=(n(370),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).addFavorite=function(e,t){""===e.currentTarget.style.color||"rgb(102, 102, 102)"===e.currentTarget.style.color?(e.currentTarget.style.color="#f00",n.props.musicActions.addFavoriteMusic(t.filename)):(e.currentTarget.style.color="#666",n.props.musicActions.removeFavoriteMusic(t.filename))},n.state={loaded:!1,songList:[],songInfo:{},addRemove:!0},n.getData=n.getData.bind(Object(S.a)(Object(S.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getData(),console.log(this.props)}},{key:"getData",value:function(){var e=Object(M.a)(A.a.mark(function e(){var t;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/kugou/".concat(I.song_playlist,"/").concat(this.props.match.params.id,"&json=true")).then(function(e){return e.json()}).catch(function(e){console.log(e)});case 2:(t=e.sent).list.list.info.length>0&&this.setState({songList:t.list.list.info,songInfo:{img:t.info.list.imgurl,name:t.info.list.specialname,creater:t.info.list.nickname,time:t.info.list.publishtime},loaded:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addOne",value:function(e,t){e.currentTarget.style.display="none",e.currentTarget.nextSibling.style.display="block",0===this.props.musicList.length&&this.props.musicActions.fetchMusic(t.hash),this.props.musicActions.getMusicHash({hash:t.hash}),this.props.musicActions.fetchMusic(t.hash),this.props.musicActions.control({playing:!0}),this.props.history.push("/playControl/#".concat(t.hash))}},{key:"removeOne",value:function(e,t){e.currentTarget.style.display="none",e.currentTarget.previousSibling.style.display="block",this.props.musicActions.removeMusicOne(t)}},{key:"addOrRemoveAll",value:function(e){var t=document.getElementsByClassName("plus_one"),n=document.getElementsByClassName("minus_one");if(this.state.addRemove){for(var a=0;a<e.length;a++)this.props.musicActions.fetchMusic(e[a].hash);this.props.musicActions.getMusicHash({hash:e[0].hash}),this.props.musicActions.control({playing:!0}),this.props.history.push("/playControl/#".concat(e[0].hash)),this.setState({addRemove:!1});for(var r=0;r<t.length;r++)t[r].style.display="none";for(var s=0;s<n.length;s++)n[s].style.display="block"}else{this.props.musicActions.removeMusicAll(),this.setState({addRemove:!0});for(var o=0;o<t.length;o++)t[o].style.display="block";for(var c=0;c<n.length;c++)n[c].style.display="none"}}},{key:"setStyle",value:function(e){return this.props.favoriteMusic.length>0&&this.props.favoriteMusic.indexOf(e.filename)>=0?{color:"rgba(233,32,61)"}:{color:""}}},{key:"back",value:function(){this.props.history.goBack()}},{key:"updatePlayProgress",value:function(){this.props.musicActions.updateProgress({currentTime:0,percentage:0})}},{key:"render",value:function(){var e=this;if(this.state.loaded){var t=this.state.songList.map(function(t,n){return o.a.createElement("li",{key:n},o.a.createElement(O.a,{onClick:function(){return e.updatePlayProgress()},to:{pathname:"/playControl/",hash:"".concat(t.hash)}},o.a.createElement("span",null,o.a.createElement("span",null,t.filename),o.a.createElement("span",null,t.remark))),o.a.createElement("span",{style:{marginLeft:"20px",display:"flex",justifyContent:"flex-start"}},o.a.createElement(j.a,{onClick:function(n){return e.addFavorite(n,t)},type:"heart",theme:"filled",style:e.setStyle(t)}),o.a.createElement(j.a,{onClick:function(n){return e.addOne(n,t)},type:"plus",className:"plus_one"}),o.a.createElement(j.a,{onClick:function(n){return e.removeOne(n,t)},type:"minus",className:"minus_one"})))});return o.a.createElement("div",{className:"albumList"},o.a.createElement(ae,{leftAction:function(){return e.back()},rightIcon:!1,title:"\u6b4c\u5355"}),o.a.createElement("div",{className:"album-top"},o.a.createElement("div",{className:"album-bg",style:{background:"url("+this.state.songInfo.img.replace(/\{size\}/g,400)+") no-repeat",backgroundSize:"100% auto"}}),o.a.createElement("div",{className:"album-content"},o.a.createElement("img",{className:"album-img",src:this.state.songInfo.img.replace(/\{size\}/g,400),alt:""}),o.a.createElement("div",{className:"album-text"},o.a.createElement("p",null,"\u540d\u79f0:",this.state.songInfo.name),o.a.createElement("p",null,"\u521b\u5efa\u4eba:",this.state.songInfo.creater),o.a.createElement("p",null,"\u66f4\u65b0\u65f6\u95f4:",this.state.songInfo.time)))),o.a.createElement("div",{className:"album-play"},o.a.createElement("span",null,"\u64ad\u653e\u5168\u90e8"),o.a.createElement(j.a,{type:"plus",onClick:function(){return e.addOrRemoveAll(e.state.songList)}})),o.a.createElement("div",{className:"album-list"},o.a.createElement("ul",null,t)))}return o.a.createElement(se,null)}}]),t}(o.a.Component)),be=Object(d.b)(function(e){return e},function(e){return{musicActions:Object(H.b)(r,e),searchActions:Object(H.b)(a,e)}})(ye),Ee=(n(372),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"close",value:function(){}},{key:"render",value:function(){console.log(this.props);var e=this.props.musicList,t=e.length>0&&e.map(function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("span",null,e.filename),o.a.createElement(j.a,{type:"close"}))});return o.a.createElement("div",{className:"music-list ".concat(this.props.show?"translateY-0":"")},o.a.createElement("div",{className:"list-title"},o.a.createElement(j.a,{type:"close"}),o.a.createElement("span",null,"\u64ad\u653e\u5217\u8868(",e.length,")\u9996"),o.a.createElement("em",null,"\u6e05\u9664")),o.a.createElement("ul",{className:"list-ul"},t))}}]),t}(o.a.Component)),Oe=Object(d.b)(function(e){return{musicList:e.musicList,currentMusic:e.currentMusic}},function(e){return{musicActions:Object(H.b)(r,e)}})(Ee),ke=n(168),Se=n.n(ke),je=n(268),Ne=n.n(je),Ce=n(269),Ae=n.n(Ce),Me=n(270),Ie=n.n(Me),xe=(n(389),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={modal:!1,dot:!1,volumed:!0,lyricHeight:38,progress:localStorage.getItem("currentVolume")>0?100*localStorage.getItem("currentVolume")+"%":100*n.props.volumeObj.volume+"%"},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props);var e=this.props.location.hash.replace(/#/,"");void 0!==e&&null!==e&&e!==this.props.currentMusic.hash&&(this.props.musicActions.getMusicHash({hash:e}),this.props.musicActions.fetchMusic(e),this.props.musicActions.control({playing:!0}))}},{key:"getCurrentSong",value:function(){var e=this.props.musicList,t=this.props.currentMusic.hash,n=null;return e.length>0&&""!==t&&e.map(function(e){return e.song.hash===t&&(n=e),0}),n}},{key:"openDot",value:function(){this.setState({dot:!0,modal:!1})}},{key:"closeDot",value:function(){this.setState({dot:!1})}},{key:"back",value:function(){this.props.history.goBack()}},{key:"favouriteStyle",value:function(){return this.props.favoriteMusic.toString().indexOf(this.props.currentMusic.hash)>-1?{color:"rgb(233, 32, 61)"}:{color:""}}},{key:"addFavourite",value:function(e,t){var n=e.currentTarget;""===n.style.color?this.props.musicActions.addFavoriteMusic(this.props.currentMusic.hash+","+t):(n.style.color="",this.props.musicActions.removeFavoriteMusic(this.props.currentMusic.hash+","+t))}},{key:"singerInfo",value:function(e){this.props.history.push({pathname:"/singer/info",state:{singerId:e}})}},{key:"setVolume",value:function(){var e=localStorage.getItem("currentVolume");this.setState({volumed:!this.state.volumed}),console.log(this.state.volumed),this.state.volumed?(console.log(this.state.volumed),this.props.musicActions.volumeControl({volume:0}),this.setState({progress:0})):(console.log(this.state.volumed),e&&null!==e?(this.props.musicActions.volumeControl({volume:parseFloat(e)}),this.setState({progress:100*parseFloat(e)+"%"})):(this.setState({progress:"50%"}),this.props.musicActions.volumeControl({volume:.5})))}},{key:"setSVG",value:function(){return this.state.volumed?{backgroundImage:"url(".concat(Ae.a,")")}:{backgroundImage:"url(".concat(Ie.a,")")}}},{key:"handleStart",value:function(e){console.log(this);var t=e.changedTouches[0].clientX-e.target.offsetLeft;this.setState({leftVal:t,sliderWidth:this.refs.slider.offsetWidth,barWidth:e.target.offsetWidth}),console.log(this.state)}},{key:"handleMove",value:function(e){var t=this.state,n=t.leftVal,a=t.sliderWidth,r=t.barWidth,s=e.changedTouches[0].clientX-n;s<0?s=0:s>a-r&&(s=a-r);var o=a-r>0?(s/(a-r)).toFixed(2):.5;o>=0&&o<=1?(0===parseFloat(o)?this.setState({volumed:!1}):this.setState({volumed:!0}),this.props.musicActions.volumeControl({volume:parseFloat(o)}),localStorage.setItem("currentVolume",o),this.setState({progress:100*o+"%"})):(this.props.musicActions.volumeControl({volume:.5}),this.setState({progress:"50%"}))}},{key:"onChange",value:function(e){this.props.musicActions.control({playing:!0}),this.props.audioPlayer.player.seekTo(parseFloat(e/100))}},{key:"changeStatus",value:function(){this.props.musicActions.control({playing:!this.props.control.playing})}},{key:"render",value:function(){var e=this;if(null!==this.getCurrentSong()){var t=this.getCurrentSong().song,n=(this.getCurrentSong().lyrics,t.album_img.replace(/\{size\}/g,400)),a=z(this.props.progress.currentTime),r=z(localStorage.getItem("duration")),s=100*this.props.progress.percentage;return t.error?o.a.createElement("div",{className:"play-control"},o.a.createElement(ae,{leftAction:function(){return e.back()},rightIcon:!1}),o.a.createElement("div",{className:"no-data"},o.a.createElement("img",{src:Se.a,alt:"\u65e0\u97f3\u4e50"}),o.a.createElement("p",null,"\u83b7\u53d6\u97f3\u4e50\u5931\u8d25"))):o.a.createElement("div",{className:"play-control"},o.a.createElement(ae,{leftAction:function(){return e.back()},rightIcon:!0,rightClassName:"ellipsis",title:t.fileName,rightAction:function(){return e.openDot()}}),o.a.createElement("div",{className:"play-bg",style:{backgroundImage:"url(".concat(n,")")}}),o.a.createElement("div",{className:"component-album"},o.a.createElement("div",{className:le()("album-pic",this.props.control.playing?"playing":"paused"),style:{background:"url(".concat(n,") center center"),backgroundSize:"cover"}})),o.a.createElement("div",{className:"lyric"}),o.a.createElement("div",{className:"play-control-box"},o.a.createElement("div",{className:"play-time-bar"},o.a.createElement("div",{className:"time_left"},a),o.a.createElement("div",{className:"play-range"},o.a.createElement(Ne.a,{maxValue:100,minValue:0,value:s||0,onChange:function(t){return e.onChange(t)}})),o.a.createElement("div",{className:"time_right"},r)),o.a.createElement("div",{className:"play-control-bar"},o.a.createElement("div",{className:"previous"}),o.a.createElement("div",{onClick:function(){return e.changeStatus()},className:le()(this.props.control.playing?"paused":"playing")}),o.a.createElement("div",{className:"next"}),o.a.createElement("div",{className:"menu"}))),o.a.createElement("div",{className:"dot-modal ".concat(this.state.dot?"translateY-0":"")},o.a.createElement("h1",null,t.fileName),o.a.createElement("div",{className:"move-btn"},o.a.createElement("div",{className:"icon-btn"},o.a.createElement(j.a,{style:this.favouriteStyle(),onClick:function(n){return e.addFavourite(n,t.fileName)},type:"heart",theme:"filled"})),o.a.createElement("div",{className:"icon-btn"},o.a.createElement(j.a,{type:"user",onClick:function(){return e.singerInfo(t.singerId)}}))),o.a.createElement("div",{className:"volume"},o.a.createElement("div",{className:"volume-icon",style:this.setSVG(),onClick:function(){return e.setVolume()}}),o.a.createElement("div",{className:"volume-slider",ref:"slider"},o.a.createElement("div",{className:"volume-mask",style:{width:this.state.progress}}),o.a.createElement("div",{className:"volume-bar",style:{left:this.state.progress},onTouchStart:function(t){return e.handleStart(t)},onTouchMove:function(t){return e.handleMove(t)}}))),o.a.createElement("p",{className:"cancel",onClick:function(){return e.closeDot()}},"\u53d6\u6d88")))}return null===this.props.currentMusic.hash||void 0===this.props.currentMusic.hash?o.a.createElement("div",{className:"play-control"},o.a.createElement(ae,{leftAction:function(){return e.back()},rightIcon:!1}),o.a.createElement("div",{className:"no-data"},o.a.createElement("img",{src:Se.a,alt:"\u65e0\u97f3\u4e50"}),o.a.createElement("p",null,"\u65e0\u97f3\u4e50"))):o.a.createElement("div",{className:"play-control"},o.a.createElement(se,null))}}]),t}(o.a.Component)),_e=Object(d.b)(function(e){return e},function(e){return{musicActions:Object(H.b)(r,e)}})(xe),we=n(271),Le=n.n(we),Te=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.musicActions.audioObj({player:this.player})}},{key:"getCurrentSong",value:function(){if(this.props.musicList.length>0){var e=this.props.musicList,t=this.props.currentMusic.hash,n=null;return e.length>0&&""!==t&&e.map(function(e){return e.song.hash===t&&(n=e),0}),n}}},{key:"onProgress",value:function(e){var t=this.getCurrentSong().lyrics;this.props.musicActions.updateProgress({currentTime:e.playedSeconds,percentage:e.played});for(var n=0;n<t.length;n++)e.playedSeconds>t[n][0]&&this.props.musicActions.updateLyrics({updateLyrics:t[n][1],time:t[n][0]})}},{key:"onDuration",value:function(e){localStorage.setItem("duration",e)}},{key:"onEnd",value:function(){console.log(this.props),this.props.musicActions.control({playing:!1})}},{key:"render",value:function(){var e=this,t=this.getCurrentSong(),n=localStorage.getItem("currentVolume")>0?Number(localStorage.getItem("currentVolume")):this.props.volumeObj.volume;return o.a.createElement("div",{style:{display:"none"}},o.a.createElement(Le.a,{volume:n,playing:this.props.control.playing,url:t?t.song.url:null,ref:function(t){e.player=t},onProgress:function(t){return e.onProgress(t)},onDuration:function(t){return e.onDuration(t)},onEnded:function(t){return e.onEnd(t)}}))}}]),t}(o.a.Component),Re=Object(d.b)(function(e){return e},function(e){return{musicActions:Object(H.b)(r,e)}})(Te),Fe=n(272),Ue=n.n(Fe),De=(n(583),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={loaded:!1},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;F.get("/yy_kugou/singer/home/".concat(this.props.location.state.singerId,".html")).then(function(e){return e.text()}).then(function(t){var n=Ue.a.load(t);console.log(n);var a=n("#singer_content").text();e.setState({loaded:!0,singerInfo:a})}).catch(function(e){console.log("Error:"+e)})}},{key:"back",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"singer-info"},o.a.createElement(ae,{leftAction:function(){return e.back()},title:this.state.loaded?"\u6b4c\u624b\u7b80\u4ecb":null}),this.state.loaded?o.a.createElement("div",{className:"singer-con"},o.a.createElement("p",{className:"text-con"},this.state.singerInfo)):o.a.createElement(se,null))}}]),t}(o.a.Component)),Ve=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Re,null),o.a.createElement(f.a,null,o.a.createElement(v.a,null,o.a.createElement(g.a,{path:"/404",component:k}),o.a.createElement(g.a,{path:"/search/result",component:ce})," ",o.a.createElement(g.a,{path:"/search",component:P}),o.a.createElement(g.a,{path:"/musiclist",component:Oe}),o.a.createElement(g.a,{path:"/playcontrol",component:_e}),o.a.createElement(g.a,{path:"/albumlist/:id",component:be}),o.a.createElement(g.a,{path:"/singer/info",component:De}),o.a.createElement(g.a,{path:"/",component:ge}),o.a.createElement(y.a,{from:"*",to:"/404"}))))},He=n(246),Pe=Object(H.c)({hotList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_SEARCH_HOT":return t.data;default:return e}},resultList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_SEARCH_RESULT":return t.data;case"CLEAR_SEARCH_RESULT":return[];default:return e}},favoriteMusic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_ADD_FAVORITE":var n=[].concat(Object(He.a)(e),[t.data]);return console.log(W(n)),W(n);case"MUSIC_REMOVE_FAVORITE":var a=e.indexOf(t.data);return e.splice(a,1),e;default:return e}},musicList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_ADD_ONE":var n=[].concat(Object(He.a)(e),[t.data]);return W(n);case"MUSIC_REMOVE_ONE":var a=e.indexOf(t.data);return e.splice(a,1),e;case"MUSIC_REMOVE_ALL":return[];default:return e}},currentMusic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_GET_HASH":return t.data;default:return e}},audioPlayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_AUDIO":return t.data;default:return e}},control:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playing:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_CONTROL":return t.playing;default:return e}},progress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentTime:0,percentage:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_PLAYTIME":return Object.assign({},e,t.data);default:return e}},volumeObj:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{volume:.5},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_VOLUME":return t.data;default:return e}},lyricsObj:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{updateLyrics:"",time:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MUSIC_UPDATE_LYRICS":return Object.assign({},e,t.data);default:return e}}}),Be=n(274),ze=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,We=function(e){return Object(H.e)(Pe,e,ze(Object(H.a)(Be.a)))},Je=(n(586),n(588),We()),Ye=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(d.a,{store:Je},o.a.createElement(Ve,null))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(590);i.a.render(o.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[277,2,1]]]);
//# sourceMappingURL=main.b070175b.chunk.js.map